define("local_hlai_grading/dashboard",["local_hlai_grading/iksha_charts"],function(IkshaCharts){var renderAdminChart=function(data){var chartNode=document.querySelector("#admin-activity-chart");if(!chartNode){return;}IkshaCharts.create("area","#admin-activity-chart",{height:260,series:[{name:"Graded Items",data:data.data}],xaxis:{categories:data.labels},colors:[IkshaCharts.colors.primary]});};var renderAdminTopCoursesChart=function(data){var chartNode=document.querySelector("#admin-top-courses-chart");if(!chartNode){return;}IkshaCharts.create("barHorizontal","#admin-top-courses-chart",{height:260,series:[{name:"Items Graded",data:data.top_courses_data}],xaxis:{categories:data.top_courses_labels},colors:[IkshaCharts.colors.info],dataLabels:{enabled:true}});};var renderTeacherGradeDistChart=function(data){var chartNode=document.querySelector("#teacher-grade-dist-chart");if(!chartNode){return;}IkshaCharts.create("bar","#teacher-grade-dist-chart",{height:260,series:[{name:"Students",data:data.grade_data}],xaxis:{categories:data.grade_labels,title:{text:"Score Range (%)"}},colors:[IkshaCharts.colors.success],dataLabels:{enabled:false}});};var renderTeacherRubricChart=function(data){var chartNode=document.querySelector("#teacher-rubric-chart");if(!chartNode){return;}IkshaCharts.create("barHorizontal","#teacher-rubric-chart",{height:260,series:[{name:"Avg Score (%)",data:data.rubric_data}],xaxis:{categories:data.rubric_labels,max:100,title:{text:"Average Score (%)"}},colors:[IkshaCharts.colors.warning],dataLabels:{enabled:true}});};var init=function(){var dataContainer=document.getElementById("hlai-dashboard-data");if(!dataContainer){return;}var rawData=dataContainer.getAttribute("data-chart");if(!rawData){return;}try{var chartData=JSON.parse(rawData);IkshaCharts.load().then(function(){if(chartData.labels){renderAdminChart(chartData);}if(chartData.top_courses_labels){renderAdminTopCoursesChart(chartData);}if(chartData.grade_labels){renderTeacherGradeDistChart(chartData);}if(chartData.rubric_labels){renderTeacherRubricChart(chartData);}}).catch(function(error){console.warn("ApexCharts failed to load.",error);});}catch(e){console.error("Failed to parse chart data",e);}};return {init:init};});
