{"version":3,"file":"iksha_charts.min.js","sources":["../src/iksha_charts.js"],"sourcesContent":["/**\n * Iksha chart presets for ApexCharts.\n *\n * @module local_hlai_grading/iksha_charts\n */\ndefine(['local_hlai_grading/apexcharts_loader'], function(ApexLoader) {\n    let Apex = window.ApexCharts || null;\n\n    const load = () => ApexLoader.load().then(library => {\n        Apex = library;\n        return library;\n    });\n    const colors = {\n        primary: '#3B82F6',\n        success: '#10B981',\n        warning: '#F59E0B',\n        danger: '#EF4444',\n        info: '#06B6D4',\n        gray: '#64748B',\n        palette: [\n            '#3B82F6',\n            '#10B981',\n            '#F59E0B',\n            '#EF4444',\n            '#8B5CF6',\n            '#EC4899',\n            '#06B6D4',\n            '#F97316',\n            '#6366F1',\n            '#14B8A6',\n        ],\n    };\n\n    const formatNumber = value => {\n        if (value === null || typeof value === 'undefined') {\n            return '';\n        }\n        if (value >= 1000000) {\n            return (value / 1000000).toFixed(1).replace(/\\.0$/, '') + 'M';\n        }\n        if (value >= 1000) {\n            return (value / 1000).toFixed(1).replace(/\\.0$/, '') + 'K';\n        }\n        return value.toLocaleString();\n    };\n\n    const deepMerge = (target, source) => {\n        Object.keys(source).forEach(key => {\n            if (source[key] && typeof source[key] === 'object' && !Array.isArray(source[key])) {\n                target[key] = target[key] || {};\n                deepMerge(target[key], source[key]);\n            } else {\n                target[key] = source[key];\n            }\n        });\n        return target;\n    };\n\n    const mergeConfig = (base, preset, options) => {\n        const merged = deepMerge(deepMerge(JSON.parse(JSON.stringify(base)), preset), options || {});\n        return merged;\n    };\n\n    const getBaseConfig = () => ({\n        chart: {\n            fontFamily: '-apple-system, BlinkMacSystemFont, \"Segoe UI\", Roboto, sans-serif',\n            toolbar: {show: false},\n            animations: {enabled: true, easing: 'easeinout', speed: 400},\n            dropShadow: {enabled: false},\n        },\n        colors: colors.palette,\n        stroke: {curve: 'smooth', width: 2},\n        grid: {\n            borderColor: '#E2E8F0',\n            strokeDashArray: 4,\n            xaxis: {lines: {show: false}},\n            yaxis: {lines: {show: true}},\n            padding: {top: 0, right: 0, bottom: 0, left: 0},\n        },\n        dataLabels: {enabled: false},\n        legend: {\n            fontFamily: 'inherit',\n            fontSize: '12px',\n            fontWeight: 500,\n            labels: {colors: '#64748B'},\n            markers: {width: 8, height: 8, radius: 2},\n            itemMargin: {horizontal: 12, vertical: 4},\n        },\n        tooltip: {\n            theme: 'light',\n            style: {fontSize: '12px', fontFamily: 'inherit'},\n            x: {show: true},\n            marker: {show: true},\n        },\n        xaxis: {\n            labels: {\n                style: {colors: '#64748B', fontSize: '11px', fontWeight: 500},\n            },\n            axisBorder: {show: false},\n            axisTicks: {show: false},\n        },\n        yaxis: {\n            labels: {\n                style: {colors: '#64748B', fontSize: '11px', fontWeight: 500},\n                formatter: val => formatNumber(val),\n            },\n        },\n    });\n\n    const areaConfig = options => mergeConfig(getBaseConfig(), {\n        chart: {type: 'area', height: options.height || 240},\n        fill: {\n            type: 'gradient',\n            gradient: {\n                shadeIntensity: 1,\n                opacityFrom: 0.4,\n                opacityTo: 0.05,\n                stops: [0, 90, 100],\n            },\n        },\n    }, options);\n\n    const barConfig = options => mergeConfig(getBaseConfig(), {\n        chart: {type: 'bar', height: options.height || 240},\n        plotOptions: {\n            bar: {\n                borderRadius: 4,\n                columnWidth: '60%',\n                dataLabels: {position: 'top'},\n            },\n        },\n    }, options);\n\n    const barHorizontalConfig = options => mergeConfig(getBaseConfig(), {\n        chart: {type: 'bar', height: options.height || 240},\n        plotOptions: {\n            bar: {\n                horizontal: true,\n                borderRadius: 4,\n                barHeight: '70%',\n            },\n        },\n        grid: {\n            xaxis: {lines: {show: true}},\n            yaxis: {lines: {show: false}},\n        },\n    }, options);\n\n    const getStatusColors = statuses => {\n        const map = {\n            completed: colors.success,\n            passed: colors.success,\n            active: colors.success,\n            healthy: colors.success,\n            connected: colors.success,\n            inprogress: colors.warning,\n            'in_progress': colors.warning,\n            pending: colors.warning,\n            'at_risk': colors.warning,\n            expiring: colors.warning,\n            failed: colors.danger,\n            overdue: colors.danger,\n            critical: colors.danger,\n            suspended: colors.danger,\n            'not_started': colors.danger,\n            notstarted: colors.danger,\n            info: colors.info,\n            processing: colors.info,\n            unknown: colors.gray,\n            draft: colors.gray,\n        };\n        return statuses.map(status => {\n            const key = status.toLowerCase().replace(/\\s+/g, '_');\n            return map[key] || colors.gray;\n        });\n    };\n\n    const create = (type, selector, options) => {\n        if (!Apex) {\n            return null;\n        }\n        const node = document.querySelector(selector);\n        if (!node) {\n            return null;\n        }\n        let config = null;\n        switch (type) {\n            case 'area':\n                config = areaConfig(options);\n                break;\n            case 'bar':\n                config = barConfig(options);\n                break;\n            case 'barHorizontal':\n                config = barHorizontalConfig(options);\n                break;\n            default:\n                config = areaConfig(options);\n        }\n        const chart = new Apex(node, config);\n        chart.render();\n        return chart;\n    };\n\n    return {\n        colors,\n        formatNumber,\n        getBaseConfig,\n        getStatusColors,\n        load,\n        create,\n    };\n});\n"],"names":["define","ApexLoader","Apex","window","ApexCharts","colors","primary","success","warning","danger","info","gray","palette","formatNumber","value","toFixed","replace","toLocaleString","deepMerge","target","source","Object","keys","forEach","key","Array","isArray","mergeConfig","base","preset","options","JSON","parse","stringify","getBaseConfig","chart","fontFamily","toolbar","show","animations","enabled","easing","speed","dropShadow","stroke","curve","width","grid","borderColor","strokeDashArray","xaxis","lines","yaxis","padding","top","right","bottom","left","dataLabels","legend","fontSize","fontWeight","labels","markers","height","radius","itemMargin","horizontal","vertical","tooltip","theme","style","x","marker","axisBorder","axisTicks","formatter","val","areaConfig","type","fill","gradient","shadeIntensity","opacityFrom","opacityTo","stops","getStatusColors","statuses","map","completed","passed","active","healthy","connected","inprogress","pending","expiring","failed","overdue","critical","suspended","notstarted","processing","unknown","draft","status","toLowerCase","load","then","library","create","selector","node","document","querySelector","config","plotOptions","bar","borderRadius","columnWidth","position","barConfig","barHeight","barHorizontalConfig","render"],"mappings":"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"}